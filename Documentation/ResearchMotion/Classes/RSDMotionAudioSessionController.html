<!DOCTYPE html>
<html lang="en">
  <head>
    <title>RSDMotionAudioSessionController Class Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset='utf-8'>
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a name="//apple_ref/swift/Class/RSDMotionAudioSessionController" class="dashAnchor"></a>
    <a title="RSDMotionAudioSessionController Class Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="../index.html">ResearchMotion Docs</a></p>
        <p class="header-right"><a href="https://github.com/Sage-Bionetworks/SageResearch.git"><img src="../img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="../index.html">ResearchMotion Reference</a>
        <img id="carat" src="../img/carat.png" />
        RSDMotionAudioSessionController Class Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="../Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/RSDMotionAudioSessionController.html">RSDMotionAudioSessionController</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/RSDMotionAuthorization.html">RSDMotionAuthorization</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/RSDMotionRecorder.html">RSDMotionRecorder</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/RSDMotionTaskObject.html">RSDMotionTaskObject</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Enums/RSDAttitudeReferenceFrame.html">RSDAttitudeReferenceFrame</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Extensions/CMAccelerometerData.html">CMAccelerometerData</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions/CMGyroData.html">CMGyroData</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions/CMMagnetometerData.html">CMMagnetometerData</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions/Notification.html">Notification</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions/Notification/Name.html">– Name</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions/RSDIdentifier.html">RSDIdentifier</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions/RSDMotionRecorderConfiguration.html">RSDMotionRecorderConfiguration</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Protocols.html#/s:14ResearchMotion9RSDVectorP">RSDVector</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/RSDVectorData.html">RSDVectorData</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Structs/RSDMotionRecord.html">RSDMotionRecord</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            <h1>RSDMotionAudioSessionController</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="kt">RSDMotionAudioSessionController</span> <span class="p">:</span> <span class="kt">NSObject</span><span class="p">,</span> <span class="kt">RSDAudioSessionController</span></code></pre>

                </div>
              </div>
            <p>The audio session controller to use when recording motion sensor data in the background with the phone
screen locked.</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    Using this audio session controller includes playing an audio file in the background in order to
keep the app responsive to step transitions and voice commands. Without the audio playing in the background
or the use of GPS, the app will stop responding to timing events.

</div>

          </section>
          <section class="section task-group-section">
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:14ResearchMotion31RSDMotionAudioSessionControllerC05audioE0So07AVAudioE0CSgvp"></a>
                    <a name="//apple_ref/swift/Property/audioSession" class="dashAnchor"></a>
                    <a class="token" href="#/s:14ResearchMotion31RSDMotionAudioSessionControllerC05audioE0So07AVAudioE0CSgvp">audioSession</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The audio session is a shared pointer to the current audio session (if running). This is used to
allow background audio. Background audio is required in order for an active step to play sound
such as voice commands to a participant who make not be looking at their screen.</p>

<p>For example, a <q>Walk and Balance</q> task that measures gait and balance by having the participant
walk back and forth followed by having them turn in a circle would require turning on background
audio in order to play spoken instructions even if the screen is locked before putting the phone
in the participant&rsquo;s pocket.</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    The application settings will need to include setting capabilities appropriate for
background audio if this feature is used.

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">private(set)</span> <span class="k">var</span> <span class="nv">audioSession</span><span class="p">:</span> <span class="kt">AVAudioSession</span><span class="p">?</span> <span class="p">{</span>
  <span class="k">get</span>
  <span class="p">}</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:14ResearchMotion31RSDMotionAudioSessionControllerC11audioPlayerSo07AVAudioH0CSgvp"></a>
                    <a name="//apple_ref/swift/Property/audioPlayer" class="dashAnchor"></a>
                    <a class="token" href="#/s:14ResearchMotion31RSDMotionAudioSessionControllerC11audioPlayerSo07AVAudioH0CSgvp">audioPlayer</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The audio player that plays the background sound used to keep the motion sensors active. This is a
work-around to allow the task to continue running in the background without requiring GPS by instead
playing an audio file of silence.</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    As of this writing, speech-to-text using the <code>AVSpeechSynthesizer</code> will <em>not</em> run in the
background after 5 seconds and turning on background audio using <code>AVAudioSession</code> is not enough to
keep any timers running. syoung 05/21/2019

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">private(set)</span> <span class="k">var</span> <span class="nv">audioPlayer</span><span class="p">:</span> <span class="kt">AVAudioPlayer</span><span class="o">!</span> <span class="p">{</span>
  <span class="k">get</span>
  <span class="p">}</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:14ResearchMotion31RSDMotionAudioSessionControllerC05startdE8IfNeededyyF"></a>
                    <a name="//apple_ref/swift/Method/startAudioSessionIfNeeded()" class="dashAnchor"></a>
                    <a class="token" href="#/s:14ResearchMotion31RSDMotionAudioSessionControllerC05startdE8IfNeededyyF">startAudioSessionIfNeeded()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Start the background audio session if needed. This will look to see if <code><a href="../Classes/RSDMotionAudioSessionController.html#/s:14ResearchMotion31RSDMotionAudioSessionControllerC05audioE0So07AVAudioE0CSgvp">audioSession</a></code> is already started
and if not, will start a new session.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">startAudioSessionIfNeeded</span><span class="p">()</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:14ResearchMotion31RSDMotionAudioSessionControllerC04stopdE0yyF"></a>
                    <a name="//apple_ref/swift/Method/stopAudioSession()" class="dashAnchor"></a>
                    <a class="token" href="#/s:14ResearchMotion31RSDMotionAudioSessionControllerC04stopdE0yyF">stopAudioSession()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Stop the audio session and audio player.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">stopAudioSession</span><span class="p">()</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </section>
        </section>
        <section id="footer">
          <p>&copy; 2017-2019 <a class="link" href="https://developer.sagebridge.org" target="_blank" rel="external">Sage Bionetworks</a>. All rights reserved.</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.2</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
